(function ($, Drupal) {
  "use strict";
  var counter = function () {
    $(".timer").each(function () {
      $(".timer").countTo();
    });
  };
  setTimeout(counter, 400);

  $(window).on("load", function () {
    $(".se-pre-con").delay(700).fadeOut("slow");

      var menu = $(".main-navbar");
      function setMenu() {
        if ($(window).scrollTop() > 91) {
          menu.addClass("scrolled downscrolled");
        } else {
          menu.removeClass("scrolled downscrolled");
        }
      }
      setMenu();
      if (window.matchMedia("(min-width: 575px)").matches) {
        var nice = $("html").niceScroll({
          mousescrollstep: 80,
          scrollspeed: 200, // scrolling speed
          enabletranslate3d: true,
          cursorcolor: "#007A3E", // change cursor color in hex
          cursorwidth: "6px", // cursor width in pixel (you can also write "5px")
          cursorborder: "0px solid #fff", // css definition for cursor border
        });
      }

  });



  
  /*----------------------Menu------------------------*/
  var element = $(".menu");
  var elementdesc = $(".mainnav");
  var menu = $(".main-navbar");

  $(document).ready(function () {
    $(".btn-menu").on("click", function () {
      $("#mainnav-mobi").slideToggle(400);
      $(".right-links").toggleClass("right-links-mobi");
      $(".top-nav .nav-item").toggleClass("nav-item-mobi");
      $("#mainnav-mobi").toggleClass("downscrolledresponsive");
      // $(".main-navbar").toggleClass("menubackground")
      $(this).toggleClass("active");
      //$('.block-search').toggleClass("mobile");
      $("#block-ceta-search").toggleClass("mobile-played");
    });

    if ( $(document).width() < 1199) {
      element.attr("id", "metismenu");
      elementdesc.css("display", "none");
      elementdesc.attr("id", "mainnav-mobi");
     if(element){
        element.metisMenu({
          // selector of parent trigger
          // parentTrigger: "li",
          // selector of submenu
          // subMenu: "ul",
          // enable auto collapse
          // toggle: true,
          // trigger element
          triggerElement: "span"
          
      });
     }
    } else {
      element.removeAttr("id");
      elementdesc.css("display", "flex");
      elementdesc.attr("id", "mainnav");
    }
    if ( $(document).width() > 1199) {

    var menu = $(".main-navbar");

    $(document).on("scroll", function () {
      setMenu();
    });
  
    function setMenu() {
      if ($(window).scrollTop() > 91) {
        menu.addClass("scrolled downscrolled");
      } else {
        menu.removeClass("scrolled downscrolled");
      }
    }
  }  
  if (window.matchMedia("(min-width: 575px)").matches) {
    console.log("resize scroll");
    var nice = $("html").niceScroll({
      mousescrollstep: 80,
      scrollspeed: 200, // scrolling speed
      enabletranslate3d: true,
      cursorcolor: "#007A3E", // change cursor color in hex
      cursorwidth: "6px", // cursor width in pixel (you can also write "5px")
      cursorborder: "0px solid #fff", // css definition for cursor border
    });
  }
  });

 
 $(document).on("scroll", function () {
      setMenu();
    });
  
    function setMenu() {
      if ($(window).scrollTop() > 91) {
        menu.addClass("scrolled downscrolled");
      } else {
        menu.removeClass("scrolled downscrolled");
      }
    }
 
   

  $(window).on("resize", function (event) {

    if ( $(document).width() < 1199) {
       
        element.attr("id", "metismenu");
        elementdesc.attr("id", "mainnav-mobi");
       if(element){
          element.metisMenu({
            // selector of parent trigger
            // parentTrigger: "li",
            // selector of submenu
            // subMenu: "ul",
            // enable auto collapse
            // toggle: true,
            // trigger element
            triggerElement: "span"
            
        });
       }
      } else {
        element.removeAttr("id");
        elementdesc.attr("id", "mainnav");
      }

});
     

 


  // $('[data-toggle="tooltip"]').tooltip()



  // $('.tlt').textillate({
  //     in: {
  //         effect: 'fadeInUp',
  //          delayScale: 0.6,
  //          delay: 70,
  //     }
  // });
  // $('.tlt1').textillate({
  //     in: {
  //         effect: 'fadeInUpBig',
  //          delayScale: 0.6,
  //          delay: 70,
  //     }
  // });

  //srcoll


  var menu = $(".main-navbar");

  $("#nav-toggle").click(function () {
    $("nav ul.nav-list").slideToggle();
    this.classList.toggle("active");
    //$('.icons-social').toggleClass("mobile");
    //$('.block-search').toggleClass("mobile");
    $(".block-language").toggleClass("mobile");
    $("body").toggleClass("open");
  });

//   var menuType = "desktop";

//   $(window).on("load resize", function () {
//     var currMenuType = "desktop";
//     if (matchMedia("only screen and (max-width: 1199px)").matches) {
//       currMenuType = "mobile";
//     }

//     if (currMenuType !== menuType) {
//       menuType = currMenuType;

//       if (currMenuType === "mobile") {
//         var $mobileMenu = $("#mainnav").attr("id", "mainnav-mobi").hide();
//         var hasChildMenu = $("#mainnav-mobi").find("li:has(ul)");
//         $(".li-search").hide();
//         $(".main-navbar container").append($mobileMenu);
//         hasChildMenu.children("ul").hide();
//       } else {
//         var $desktopMenu = $("#mainnav-mobi")
//           .attr("id", "mainnav")
//           .removeAttr("style");

//         $desktopMenu.find(".submenu").removeAttr("style");
//         $(".main-navbar container").find(".nav-wrap").append($desktopMenu);
//       }
//     }
//   });

 
  /*--------------------------Block Serach ------------------------------*/
  $(".block-search .search-icon").on("click", function () {
    $(".block-search-content").toggleClass("is-played");
    $(".main-navbar").toggleClass("is-played");
  });
  $("#block-ceta-search").on("click", function (e) {
    e.stopPropagation();
  });

  $(".icon-close").on("click", function () {
    $(".block-search-content").toggleClass("is-played");
    $(".main-navbar").toggleClass("is-played");
  });
  $(".navbar-search__toggler").on("click", function () {
    if ($(".block-search-content").hasClass("is-played")) {
      $(".block-search-content").removeClass("is-played");
    }
  });

  $('.navbar-nav__list a[href="#"]').on("click", function (e) {
    e.preventDefault();
  });

  /*-----------------------------scroll header----------------------*/

  /*---------------- Ipada ---------------*/
  var mobileHover = function () {
    $("*")
      .on("touchstart", function () {
        $(this).trigger("hover");
      })
      .on("touchend", function () {
        $(this).trigger("hover");
      });
  };
  mobileHover();

  $(".engagement-item").hover(function () {
    $(".class_image_engagement").html("");
    var img_item = $(this).find(".engagement-list__image").html();
    //var found = $('.formation-list__image', img_item);
    $(".class_image_engagement").html(img_item);
    $(".class_image_engagement img").addClass("fadeIn");
    //        $(".class_image_engagement img").css( "transition", "opacity 10s ease" );
    //        $(".class_image_engagement img").css( "opacity", "0.3" );
    //        $(".class_image_engagement img").attr('data-wow-duration', '0.3s');
    //        $(".class_image_engagement img").attr('data-wow-delay', '0.3s');
    // var img = $(this,".formation-list__image picture").html();
  });
})(jQuery, Drupal);
